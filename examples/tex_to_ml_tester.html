<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>LaTeX → MathML demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    body { margin: 2rem; line-height: 1.4; }
    .grid { display: grid; gap: 1rem; grid-template-columns: 1fr; max-width: 900px; }
    @media (min-width: 900px) { .grid { grid-template-columns: 1fr 1fr; } }
    textarea, input[type="text"] {
      width: 100%; padding: .75rem; border: 1px solid #ccc; border-radius: .5rem; min-height: 9rem;
      font: 14px ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      box-sizing: border-box; resize: vertical;
    }
    .row { margin-top: 1.25rem; }
    .label { font-size: .9rem; color: #444; margin: .25rem 0 .5rem; display: block; }
    .output { background: #f7f7f7; }
    .render {
      padding: 1rem; border: 1px dashed #bbb; border-radius: .5rem; background: #fff;
      overflow-x: auto;
    }
    .error { color: #b00020; font-size: .9rem; min-height: 1.2em; }
    .muted { color: #666; font-size: .9rem; }
  </style>
</head>
<body>
  <h1>LaTeX → MathML</h1>
  <p class="muted">Type LaTeX math below. The MathML string will appear on the right and render underneath.</p>

  <div class="grid">
    <div>
      <label class="label" for="latexIn">LaTeX input</label>
      <textarea id="latexIn" placeholder="e.g. \frac{a^2+b^2}{\sqrt{c}} = \int_0^\infty e^{-x^2}\,dx"></textarea>
    </div>

    <div>
      <label class="label" for="mathmlOut">MathML (read-only)</label>
      <textarea id="mathmlOut" class="output" readonly></textarea>
    </div>
  </div>

  <div class="row">
    <span class="label">Rendered MathML</span>
    <div id="renderTarget" class="render" aria-live="polite"></div>
    <div id="status" class="error" role="status"></div>
    <p class="muted">Note: Rendering depends on your browser’s MathML support.</p>
  </div>

  <!-- IMPORTANT: load your converter first. Replace the src with your actual file path. -->
  <script defer src="./latexToMathML.js"></script>

  <!-- Our glue code -->
  <script defer>
    (function () {
      const $in = document.getElementById('latexIn');
      const $out = document.getElementById('mathmlOut');
      const $render = document.getElementById('renderTarget');
      const $status = document.getElementById('status');

      // Simple debounce so we don’t spam conversions while typing
      let t = null;
      const debounce = (fn, ms = 150) => (...args) => {
        clearTimeout(t); t = setTimeout(() => fn(...args), ms);
      };

      function update() {
        $status.textContent = '';
        const src = $in.value;
        if (!src.trim()) {
          $out.value = '';
          $render.innerHTML = '';
          return;
        }

        try {
          if (typeof latexToMathML !== 'function') {
            throw new Error('latexToMathML() is not available. Check that your script loaded.');
          }

          const mml = latexToMathML(src); // <-- your function
          if (typeof mml !== 'string') {
            throw new Error('latexToMathML() did not return a string.');
          }

          $out.value = mml;

          // Render MathML (trusted from your converter). If you prefer extra safety,
          // you could add a basic check like requiring it to start with "<math".
          $render.innerHTML = mml;
        } catch (err) {
          console.error(err);
          $status.textContent = err.message || String(err);
          $out.value = '';
          $render.textContent = '';
        }
      }

      $in.addEventListener('input', debounce(update, 120));

      // Try an initial render if there’s prefilled content
      update();
    })();
  </script>
</body>
</html>
